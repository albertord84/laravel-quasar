(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{2940:function(t,e,a){},"51f7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-gray q-pa-md"},[a("div",{staticClass:"flex justify-between"},[a("h6",[t._v("Campanhas")])]),a("q-card",{attrs:{"no-bordered":"",flat:""}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"orange-10","indicator-color":"orange-10",align:"left",caps:"","inline-label":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{staticClass:"text-dark",attrs:{name:"showCampaigns",icon:"horizontal_split",label:"Campanhas"},on:{click:t.showTabCampaigns}}),a("q-tab",{staticClass:"text-dark",attrs:{name:"crudCampaigns",icon:t.iconActionCompany,label:t.crudTabTitle}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"showCampaigns"}},[a("TableCampaigns",{on:{editCampaign:t.editCampaign}})],1),a("q-tab-panel",{attrs:{name:"crudCampaigns"}},[a("CrudCampaigns",{attrs:{action:t.action,campaign:t.campaign},on:{reloadCampaigns:t.reloadCampaigns}})],1)],1)],1)],1)},i=[],s=(a("a481"),a("f751"),{name:"Campaigns",components:{CrudCampaigns:a("823c").default,TableCampaigns:a("aa3c").default},data:function(){return{tab:"",campaign:[],crudTabTitle:"",action:"",iconActionCCampaigns:""}},methods:{showTabCampaigns:function(){this.campaign={},this.crudTabTitle="Nova campanha",this.action="insert",this.iconActionCompany="add",this.tab="showCampaigns"},editCampaign:function(t){this.campaign=Object.assign({},t),this.crudTabTitle="Editar campanha",this.action="edit",this.iconActionCompany="edit",this.tab="crudCampaigns"},reloadCampaigns:function(){this.showTabCampaigns()}},watch:{},computed:{},beforeMount:function(){this.showTabCampaigns()},created:function(){},destroyed:function(){},beforeRouteEnter:function(t,e,a){a((function(t){t.isAuth&&t.$router.replace({name:"public.index"})}))},meta:function(){return{title:"Campanhas"}}}),o=s,r=(a("a374"),a("2877")),l=Object(r["a"])(o,n,i,!1,null,"5a5f99d9",null);e["default"]=l.exports},6468:function(t,e,a){"use strict";var n=a("c033"),i=a.n(n);i.a},"823c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-left"},[t._m(0),a("q-separator",{staticClass:"col-12 q-pa-none q-ma-none"}),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Nome (*) ")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"",square:"","label-color":"orange-8",color:"orange-8"},model:{value:t.campaignModel.name,callback:function(e){t.$set(t.campaignModel,"name",e)},expression:"campaignModel.name"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Objetivo ")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"",square:"","label-color":"orange-8",color:"orange-8"},model:{value:t.campaignModel.objetive,callback:function(e){t.$set(t.campaignModel,"objetive",e)},expression:"campaignModel.objetive"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Descrição ")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{autogrow:"",filled:"",square:"","label-color":"orange-8",color:"orange-8"},model:{value:t.campaignModel.decription,callback:function(e){t.$set(t.campaignModel,"decription",e)},expression:"campaignModel.decription"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Observação")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{autogrow:"",filled:"",square:"","label-color":"orange-8",color:"orange-8"},model:{value:t.campaignModel.observation,callback:function(e){t.$set(t.campaignModel,"observation",e)},expression:"campaignModel.observation"}})],1),1==t.userLoggued.role_id?a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Administrador da empressa (*)")]),a("q-select",{staticClass:"col-12 q-mt-sm",attrs:{options:t.options,filled:"","label-color":"orange-8",color:"orange-8","hide-selected":"","fill-input":"","input-debounce":"0",label:"",clearable:"","use-input":""},on:{filter:t.filterFnAutoselect,"filter-abort":t.abortFilterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n              Não existem administradores\n            ")])],1)]},proxy:!0}],null,!1,3364781232),model:{value:t.selectedAdminEmail,callback:function(e){t.selectedAdminEmail=e},expression:"selectedAdminEmail"}})],1):t._e(),1==t.userLoggued.role_id?a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Status da campanha (*)")]),a("q-select",{staticClass:"col-12 q-mt-sm",attrs:{options:t.optionsStatus,filled:"","label-color":"orange-8",color:"orange-8","hide-selected":"","fill-input":"","input-debounce":"0",label:"",clearable:"","use-input":""},on:{filter:t.filterFnAutoselectStatus,"filter-abort":t.abortFilterFnStatus},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n              Status das campanhas\n            ")])],1)]},proxy:!0}],null,!1,767276572),model:{value:t.selectedCampaignStatus,callback:function(e){t.selectedCampaignStatus=e},expression:"selectedCampaignStatus"}})],1):t._e(),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Base de usuários (*)")]),a("q-select",{staticClass:"col-12 q-mt-sm",attrs:{options:t.optionsBases,filled:"","label-color":"orange-8",color:"orange-8","hide-selected":"","fill-input":"","input-debounce":"0",label:"",clearable:"","use-input":""},on:{filter:t.filterFnAutoselectBase,"filter-abort":t.abortFilterFnBase},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                Não existem bases de usuários\n            ")])],1)]},proxy:!0}]),model:{value:t.selectedCampaignBase,callback:function(e){t.selectedCampaignBase=e},expression:"selectedCampaignBase"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Questionário (*)")]),a("q-select",{staticClass:"col-12 q-mt-sm",attrs:{options:t.optionsQuestionnaires,filled:"","label-color":"orange-8",color:"orange-8","hide-selected":"","fill-input":"","input-debounce":"0",label:"",clearable:"","use-input":""},on:{filter:t.filterFnAutoselectQuestionnaires,"filter-abort":t.abortFilterFnQuestionnaires},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                Não existem questionários\n            ")])],1)]},proxy:!0}]),model:{value:t.selectedCampaignQuestionnary,callback:function(e){t.selectedCampaignQuestionnary=e},expression:"selectedCampaignQuestionnary"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Limite de respostas (*)")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"",square:"","label-color":"orange-8",color:"orange-8"},model:{value:t.campaignModel.response_limit,callback:function(e){t.$set(t.campaignModel,"response_limit",e)},expression:"campaignModel.response_limit"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Data para envio dos convites  (*)")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"","label-color":"orange-8",color:"orange-8"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.invitations_send_date,callback:function(e){t.$set(t.campaignModel,"invitations_send_date",e)},expression:"campaignModel.invitations_send_date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.invitations_send_date,callback:function(e){t.$set(t.campaignModel,"invitations_send_date",e)},expression:"campaignModel.invitations_send_date"}})],1)],1)]},proxy:!0}]),model:{value:t.campaignModel.invitations_send_date,callback:function(e){t.$set(t.campaignModel,"invitations_send_date",e)},expression:"campaignModel.invitations_send_date"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Data de início da campanha (*)")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"","label-color":"orange-8",color:"orange-8"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.start_date,callback:function(e){t.$set(t.campaignModel,"start_date",e)},expression:"campaignModel.start_date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.start_date,callback:function(e){t.$set(t.campaignModel,"start_date",e)},expression:"campaignModel.start_date"}})],1)],1)]},proxy:!0}]),model:{value:t.campaignModel.start_date,callback:function(e){t.$set(t.campaignModel,"start_date",e)},expression:"campaignModel.start_date"}})],1),a("div",{staticClass:"col-6 q-px-xs q-mt-lg"},[a("span",[t._v("Data de fim da campanha (*)")]),a("q-input",{staticClass:"col-12 q-mt-sm",attrs:{filled:"","label-color":"orange-8",color:"orange-8"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.end_date,callback:function(e){t.$set(t.campaignModel,"end_date",e)},expression:"campaignModel.end_date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"",locale:t.myLocale,color:"orange-8"},model:{value:t.campaignModel.end_date,callback:function(e){t.$set(t.campaignModel,"end_date",e)},expression:"campaignModel.end_date"}})],1)],1)]},proxy:!0}]),model:{value:t.campaignModel.end_date,callback:function(e){t.$set(t.campaignModel,"end_date",e)},expression:"campaignModel.end_date"}})],1),a("div",{staticClass:"col-12 flex q-my-md justify-between"},[a("span",{staticClass:"q-mt-sm",staticStyle:{"font-size":"1.2rem"}},[t._v("Finalizar "+t._s("insert"===t.action?"criação":"edição")+" da campanha")])]),a("q-separator",{staticClass:"col-12 q-pa-none q-ma-none"}),a("div",{staticClass:"q-my-md"},[a("q-btn",{staticClass:"q-pa-sm q-mb-sm bg-orange-8",attrs:{"text-color":"white",loading:t.isCreatingCampaign,label:"Guardar campanha",title:"Guardar campanha",icon:"save"},on:{click:function(e){return e.preventDefault(),t.addCampaign(e)}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner")]},proxy:!0}])})],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 flex q-mt-xs justify-between"},[a("span",{staticClass:"q-mt-sm",staticStyle:{"font-size":"1.2rem"}},[t._v("Dados gerais")])])}],s=(a("7f7f"),a("551c"),a("06db"),a("097d"),a("28a5"),a("2034")),o=a("31f1"),r={name:"CrudCampaigns",props:{action:null,company:null},data:function(){return{campaignModel:{id:0,status_id:0,criator_id:0,updater_id:0,questionary_id:0,base_id:0,name:"",objetive:"",description:"",observation:"",response_limit:"",response_amount:"",invitations_sent:"",invitations_accepted:"",invitations_declined:"",invitations_send_date:"",requested_date:"",analyzed_date:"",start_date:"",end_date:"",created_at:"",updated_at:""},selectedAdminEmail:"",selectedAdmin:{},listAdmins:[],stringOptions:[],options:[],selectedCampaignStatus:"",selectedStatus:{},listStatus:[],stringOptionsStatus:[],optionsStatus:[],selectedCampaignBase:"",selectedBase:{},listBases:[],stringOptionsBases:[],optionsBases:[],selectedCampaignQuestionnary:"",selectedQuestionnary:{},listQuestionnaires:[],stringOptionsQuestionnaires:[],optionsQuestionnaires:[],userLoggued:{role_id:1},isCreatingCampaign:!1,myLocale:{days:"Domingo_Segunda_Terça_Quarta_Quinta_Sexta_Sábado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:1},today:""}},methods:{addCampaign:function(){var t=this;this.validateCampaignModel()&&(this.campaignModel.updater_id=this.campaignModel.criator_id,this.isCreatingCampaign=!0,s["a"].put("web/criateFullCampaign",{campaign:this.campaignModel}).then((function(e){t.isCreatingCampaign=!1,t.$q.notify({type:"positive",color:"teal-3",message:"Campanha criada com sucesso.",position:"top-right"}),t.$emit("reloadCampaigns")})).catch((function(e){t.$q.notify({type:"negative",message:"Erro cadastrando campanha.",position:"top-right"}),t.isCreatingCampaign=!1,console.log(e)})).finally((function(){t.isCreatingCampaign=!1})))},prepareToUpdateCompany:function(){},updateCompany:function(){},getAdmins:function(){var t=this;s["a"].get("web/users",{role_id:2}).then((function(e){t.stringOptions=[],e.data.some((function(e,a){t.stringOptions.push(e.email)})),t.listAdmins=e.data})).catch((function(t){})).then((function(){}))},getCampaignsStatus:function(){var t=this;s["a"].get("web/campaignsStatuses").then((function(e){t.stringOptionsStatus=[],e.data.some((function(e,a){t.stringOptionsStatus.push(e.name)})),t.listStatus=e.data})).catch((function(t){})).then((function(){}))},getBases:function(){var t=this;s["a"].get("web/bases").then((function(e){t.stringOptionsBases=[],e.data.some((function(e,a){t.stringOptionsBases.push(e.name)})),t.listBases=e.data})).catch((function(t){})).then((function(){}))},getQuestionnaires:function(){var t=this;s["a"].get("web/questionnaires").then((function(e){t.stringOptionsQuestionnaires=[],e.data.some((function(e,a){t.stringOptionsQuestionnaires.push(e.name)})),t.listQuestionnaires=e.data})).catch((function(t){})).then((function(){}))},selectUserByEmail:function(t){if(""===t.trim())return null;var e=null;return this.listAdmins.some((function(a,n){a.email===t&&(e=a)})),e},selectedStatusByName:function(t){if(""===t.trim())return null;var e=null;return this.listStatus.some((function(a,n){a.name===t&&(e=a)})),e},selectedBaseByName:function(t){if(""===t.trim())return null;var e=null;return this.listBases.some((function(a,n){a.name===t&&(e=a)})),e},selectedQuestionnaireByName:function(t){if(""===t.trim())return null;var e=null;return this.listQuestionnaires.some((function(a,n){a.name===t&&(e=a)})),e},filterFnAutoselect:function(t,e,a){var n=this;setTimeout((function(){e((function(){if(""===t)n.options=n.stringOptions;else{var e=t.toLowerCase();n.options=n.stringOptions.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}),(function(e){""!==t&&e.options.length>0&&-1===e.optionIndex&&(e.moveOptionSelection(1,!0),e.toggleOption(e.options[e.optionIndex],!0))}))}),300)},abortFilterFn:function(){this.selectedAdminEmail=""},filterFnAutoselectStatus:function(t,e,a){var n=this;setTimeout((function(){e((function(){if(""===t)n.optionsStatus=n.stringOptionsStatus;else{var e=t.toLowerCase();n.optionsStatus=n.stringOptionsStatus.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}),(function(e){""!==t&&e.options.length>0&&-1===e.optionIndex&&(e.moveOptionSelection(1,!0),e.toggleOption(e.options[e.optionIndex],!0))}))}),300)},abortFilterFnStatus:function(){this.selectedCampaignStatus=""},filterFnAutoselectBase:function(t,e,a){var n=this;setTimeout((function(){e((function(){if(""===t)n.optionsBases=n.stringOptionsBases;else{var e=t.toLowerCase();n.optionsBases=n.stringOptionsBases.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}),(function(e){""!==t&&e.options.length>0&&-1===e.optionIndex&&(e.moveOptionSelection(1,!0),e.toggleOption(e.options[e.optionIndex],!0))}))}),300)},abortFilterFnBase:function(){this.selectedCampaignBase=""},filterFnAutoselectQuestionnaires:function(t,e,a){var n=this;setTimeout((function(){e((function(){if(""===t)n.optionsQuestionnaires=n.stringOptionsQuestionnaires;else{var e=t.toLowerCase();n.optionsQuestionnaires=n.stringOptionsQuestionnaires.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}),(function(e){""!==t&&e.options.length>0&&-1===e.optionIndex&&(e.moveOptionSelection(1,!0),e.toggleOption(e.options[e.optionIndex],!0))}))}),300)},abortFilterFnQuestionnaires:function(){this.selectedCampaignQuestionnary=""},validateCampaignModel:function(){var t;if(""===this.campaignModel.name.trim())return this.$q.notify({type:"negative",message:"O campo Nome é obrigatório.",position:"top-right"}),!1;if(1===this.userLoggued.role_id){if(this.selectedAdmin=this.selectUserByEmail(this.selectedAdminEmail),!this.selectedAdmin)return this.$q.notify({type:"negative",message:"O campo Administrador é obrigatório.",position:"top-right"}),!1;this.campaignModel.criator_id=this.selectedAdmin.id}if(1===this.userLoggued.role_id){if(this.selectedStatus=this.selectedStatusByName(this.selectedCampaignStatus),!this.selectedStatus)return this.$q.notify({type:"negative",message:"O campo Status é obrigatório.",position:"top-right"}),!1;this.campaignModel.status_id=this.selectedStatus.id}return this.selectedBase=this.selectedBaseByName(this.selectedCampaignBase),this.selectedBase?(this.campaignModel.base_id=this.selectedBase.id,this.selectedQuestionnary=this.selectedQuestionnaireByName(this.selectedCampaignQuestionnary),this.selectedQuestionnary?(this.campaignModel.questionary_id=this.selectedQuestionnary.id,""===this.campaignModel.response_limit.trim()||0===this.campaignModel.response_limit.trim()||"0"===this.campaignModel.response_limit.trim()?(this.$q.notify({type:"negative",message:"O campo Limite de respostas é inválido.",position:"top-right"}),!1):""===this.campaignModel.invitations_send_date.trim()?(this.$q.notify({type:"negative",message:"O campo Data para envio dos convites é obrigatório.",position:"top-right"}),!1):(t=o["a"].check("date2",this.campaignModel.invitations_send_date),!1===t.success?(this.$q.notify({type:"negative",message:"A Data para envio dos convites é inválida.",position:"top-right"}),!1):this.campaignModel.start_date<this.today?(this.$q.notify({type:"negative",message:"A Data de envio dos convites deve ser maior que a data atual.",position:"top-right"}),!1):""===this.campaignModel.start_date.trim()?(this.$q.notify({type:"negative",message:"O campo Data de início da campanha é obrigatório.",position:"top-right"}),!1):(t=o["a"].check("date2",this.campaignModel.start_date),!1===t.success?(this.$q.notify({type:"negative",message:"A Data de início da campanha é inválida.",position:"top-right"}),!1):this.campaignModel.start_date<=this.campaignModel.invitations_send_date?(this.$q.notify({type:"negative",message:"A Data de início da campanha deve ser maior que a Data de envio dos convites.",position:"top-right"}),!1):""===this.campaignModel.end_date.trim()?(this.$q.notify({type:"negative",message:"O campo Data de fim da campanha é obrigatório.",position:"top-right"}),!1):(t=o["a"].check("date2",this.campaignModel.end_date),!1===t.success?(this.$q.notify({type:"negative",message:"A Data de fim da campanha é inválida.",position:"top-right"}),!1):!(this.campaignModel.end_date<=this.campaignModel.start_date)||(this.$q.notify({type:"negative",message:"A Data de fim da campanha deve ser maior que a Data de início.",position:"top-right"}),!1))))):(this.$q.notify({type:"negative",message:"O campo Questionário é obrigatório.",position:"top-right"}),!1)):(this.$q.notify({type:"negative",message:"O campo Base de usuários é obrigatório.",position:"top-right"}),!1)},now:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1;a=a<11?"0"+a:a;var n=t.getFullYear();this.today=n+"-"+a+"-"+e+" 00:00"},modelTimes:function(){var t=new Date;t.setDate(t.getDate()+1);var e=t.getDate(),a=t.getMonth()+1;a=a<11?"0"+a:a;var n=t.getFullYear();this.campaignModel.invitations_send_date=n+"-"+a+"-"+e+" 00:00",t=new Date,t.setDate(t.getDate()+3),e=t.getDate(),a=t.getMonth()+1,a=a<11?"0"+a:a,n=t.getFullYear(),this.campaignModel.start_date=n+"-"+a+"-"+e+" 00:00",t=new Date,t.setDate(t.getDate()+8),e=t.getDate(),a=t.getMonth()+1,a=a<11?"0"+a:a,n=t.getFullYear(),this.campaignModel.end_date=n+"-"+a+"-"+e+" 23:59"}},watch:{},beforeMount:function(){this.getAdmins(),this.getCampaignsStatus(),this.getBases(),this.getQuestionnaires(),this.now(),"insert"===this.action&&this.modelTimes(),this.userLoggued.role_id=1},mounted:function(){}},l=r,c=(a("ebc9"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"29ccd96e",null);e["default"]=d.exports},a374:function(t,e,a){"use strict";var n=a("feb4"),i=a.n(n);i.a},aa3c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-left"},[a("div",{staticStyle:{width:"100%"}},[a("q-table",{attrs:{title:" ",data:t.data,columns:t.columns,"row-key":"id","binary-state-sort":"","card-container-style":{backgroundColor:"#ff0000"},dense:t.$q.screen.lt.md,loading:t.isLoading,pagination:t.pagination,"rows-per-page-options":[0]},scopedSlots:t._u([{key:"top",fn:function(){return[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{"label-color":"orange-8",color:"orange-8",placeholder:"Buscar ..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("div",{staticClass:"col-4 text-center"},[a("q-btn",{staticClass:"q-ml-lg",attrs:{flat:"",dense:"","icon-right":"navigate_before",title:"Página anterior","no-caps":"",disable:0==t.page},on:{click:function(e){return t.getCampaigns(t.page-1)}}}),a("q-btn",{staticClass:"q-px-sm ",attrs:{flat:"",dense:"",title:"Página atual","no-caps":""}},[t.isLoading?t._e():a("span",{attrs:{color:"orange"}},[t._v(t._s(t.page+1))]),t.isLoading?a("q-spinner-pie",{attrs:{color:"orange"}}):t._e()],1),a("q-btn",{attrs:{flat:"",dense:"","icon-right":"navigate_next",title:"Página seguinte","no-caps":"",disable:!t.hasMorePage},on:{click:function(e){return t.getCampaigns(t.page+1)}}})],1),a("div",{staticClass:"col-4 text-right"},[a("q-btn",{attrs:{color:"orange-8","icon-right":"archive",label:"Exportar",title:"Exportar para CSV","no-caps":""},on:{click:t.exportTable}})],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"name",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n                "+t._s(e.row.name)+"\n            ")]),a("q-td",{key:"response_limit",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[a("span",{attrs:{title:"Quantidade"}},[t._v(" "+t._s(e.row.response_amount)+" / ")]),a("span",{attrs:{title:"Limite"}},[t._v(" "+t._s(e.row.response_limit)+" ")])]),a("q-td",{key:"invitations_sent",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[a("span",{staticStyle:{color:"green !important"},attrs:{title:"Aceitos"}},[t._v(" "+t._s(e.row.invitations_accepted))]),t._v(" /\n              "),a("span",{staticStyle:{color:"red !important"},attrs:{title:"Rejeitados"}},[t._v(" "+t._s(e.row.invitations_declined))]),t._v(" /\n              "),a("span",{attrs:{title:"Enviados"}},[t._v(" "+t._s(e.row.invitations_sent))])]),a("q-td",{key:"requested_date",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n              "+t._s(e.row.requested_date.substr(0,10))+"\n            ")]),a("q-td",{key:"analyzed_date",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n              "+t._s(e.row.analyzed_date.substr(0,10))+"\n            ")]),a("q-td",{key:"start_date",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n              "+t._s(e.row.start_date.substr(0,10))+"\n            ")]),a("q-td",{key:"end_date",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n              "+t._s(e.row.end_date.substr(0,10))+"\n            ")]),a("q-td",{key:"created_at",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[t._v("\n              "+t._s(e.row.created_at.substr(0,10))+"\n            ")]),a("q-td",{key:"actions",staticClass:"q-pa-none q-ma-none",attrs:{props:e}},[a("div",{staticStyle:{"margin-left":"-3px"}},[a("q-icon",{staticClass:"pointer-hover q-mr-sm",attrs:{color:"primary",size:"sm",title:"Ver/Editar",name:"account_balance_wallet"},on:{click:function(a){return t.editCampaign(e.row)}}}),a("q-icon",{staticClass:"pointer-hover",attrs:{color:"red",size:"sm",name:"delete",title:"Eliminar"},on:{click:function(a){return t.confirmDeleteCampaign(e.row)}}})],1)])],1)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"col-12 text-center q-mt-md"},[a("q-btn",{staticClass:"q-ml-lg",attrs:{flat:"",dense:"","icon-right":"navigate_before",title:"Página anterior","no-caps":"",disable:0==t.page},on:{click:function(e){return t.getCampaigns(t.page-1)}}}),a("q-btn",{staticClass:"q-px-sm ",attrs:{flat:"",dense:"",title:"Página atual","no-caps":""}},[t._v("\n            "+t._s(t.page+1)+"\n          ")]),a("q-btn",{attrs:{flat:"",dense:"","icon-right":"navigate_next",title:"Página seguinte","no-caps":"",disable:!t.hasMorePage},on:{click:function(e){return t.getCampaigns(t.page+1)}}})],1)]},proxy:!0},{key:"pagination",fn:function(){},proxy:!0},{key:"no-data",fn:function(e){var n=e.icon,i=(e.message,e.filter);return[a("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v("\n            Não existem dados para mostrar...\n          ")]),a("q-icon",{attrs:{size:"2em",name:i?"filter_b_and_w":n}})],1)]}}])}),a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.modalConfirmDelete,callback:function(e){t.modalConfirmDelete=e},expression:"modalConfirmDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{staticClass:"text-red",staticStyle:{"font-size":"1.9rem"},attrs:{name:"warning"}}),t.campaign?a("span",{staticClass:"q-ml-sm"},[t._v('Confirma que deseja eliminar a campanha"'+t._s(t.campaign.name)+'"?')]):t._e()],1),a("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.isDeleting,expression:"isDeleting"}],staticClass:"text-center"},[a("q-spinner-ios",{attrs:{color:"orange-8",size:"1.9rem"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Eliminar",color:"orange-8"},on:{click:function(e){return e.preventDefault(),t.deleteCampaign(e)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"gray"}})],1)],1)],1)],1)])},i=[],s=(a("7f7f"),a("ac6a"),a("cadf"),a("06db"),a("8615"),a("28a5"),a("2034")),o=a("b178");function r(t,e){var a=void 0!==e?e(t):t;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),'"'.concat(a,'"')}var l={name:"TableCamapigns",props:{},components:{},data:function(){return{action:"",campaign:null,data:[],columns:[{label:"Nome",field:"name",name:"name",required:!0,align:"left",format:function(t){return"".concat(t)},sortable:!0},{label:"Respostas",field:"response_limit",name:"response_limit",align:"center"},{label:"Convites",field:"invitations_sent",name:"invitations_sent",align:"center"},{label:"Solicitado",field:"requested_date",name:"requested_date",align:"center"},{label:"Analizado",field:"analyzed_date",name:"analyzed_date",align:"center"},{label:"Início",field:"start_date",name:"start_date",align:"center"},{label:"Fim",field:"end_date",name:"end_date",align:"center"},{label:"Criado",field:"created_at",name:"created_at",align:"center"},{label:"Ações",field:"actions",name:"actions",align:"center"}],filter:"",isLoading:!1,page:0,hasMorePage:!1,strFilter:0,pagination:{rowsPerPage:0},modalConfirmDelete:!1,isDeleting:!1}},methods:{getCampaigns:function(t){var e=this;this.isLoading=!0,s["a"].get("web/campaigns",{filter:this.filter,page:t}).then((function(a){var n=Object.values(a.data);e.data=n,e.page=t,e.hasMorePage=n.length})).catch((function(t){})).then((function(){e.isLoading=!1}))},filterCampaigns:function(){this.filter.trim().length&&this.getCampaigns(0)},editCampaign:function(t){this.$emit("editCampaign",t)},deleteCampaign:function(){var t=this;this.campaign&&(this.isDeleting=!0,s["a"].delete("web/campaigns/"+this.campaign.id).then((function(e){t.modalConfirmDelete=!1,t.$q.notify({type:"positive",message:"Campanha eliminada com sucesso.",position:"top-right"}),t.getCampaigns(t.page)})).catch((function(t){})).then((function(){t.isDeleting=!1})))},confirmDeleteCampaign:function(t){this.campaign=t,this.modalConfirmDelete=!0},exportTable:function(){var t=this,e=[this.columns.map((function(t){return r(t.label)}))].concat(this.data.map((function(e){return t.columns.map((function(t){return r("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)})).join(",")}))).join("\r\n"),a=Object(o["h"])("table-export.csv",e,"text/csv");!0!==a&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},watch:{filter:function(t){this.getCampaigns(0)}},beforeMount:function(){this.getCampaigns(0)}},c=l,d=(a("6468"),a("2877")),p=Object(d["a"])(c,n,i,!1,null,"6ef4fd11",null);e["default"]=p.exports},c033:function(t,e,a){},ebc9:function(t,e,a){"use strict";var n=a("2940"),i=a.n(n);i.a},feb4:function(t,e,a){}}]);