{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[10],{\"19b6\":function(e,t,a){\"use strict\";var o=a(\"6cc4\"),s=a.n(o);s.a},\"26a5\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"row justify-left\"},[e._m(0),a(\"q-separator\",{staticClass:\"col-12 q-pa-none q-ma-none\"}),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Razão social (*) \"),a(\"q-icon\",{staticClass:\"q-mb-sm q-ml-xs\",attrs:{color:\"primary\",size:\"1.2rem\",name:\"help\"},on:{click:e.socialReason}})],1),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.social_reason,callback:function(t){e.$set(e.companyModel,\"social_reason\",t)},expression:\"companyModel.social_reason\"}})],1),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Nome de fantasia (*) \"),a(\"q-icon\",{staticClass:\"q-mb-sm q-ml-xs\",attrs:{color:\"primary\",size:\"1.2rem\",name:\"help\"},on:{click:e.fantasyName}})],1),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.fantasy_name,callback:function(t){e.$set(e.companyModel,\"fantasy_name\",t)},expression:\"companyModel.fantasy_name\"}})],1),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Descrição \")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{autogrow:\"\",filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.decription,callback:function(t){e.$set(e.companyModel,\"decription\",t)},expression:\"companyModel.decription\"}})],1),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Observação\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{autogrow:\"\",filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.observation,callback:function(t){e.$set(e.companyModel,\"observation\",t)},expression:\"companyModel.observation\"}})],1),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"CNPJ (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.cnpj,callback:function(t){e.$set(e.companyModel,\"cnpj\",t)},expression:\"companyModel.cnpj\"}})],1),a(\"div\",{staticClass:\"col-5 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Administrador (*)\")]),a(\"q-select\",{staticClass:\"col-12 q-mt-sm\",attrs:{options:e.options,filled:\"\",\"label-color\":\"orange-8\",color:\"orange-8\",\"hide-selected\":\"\",\"fill-input\":\"\",\"input-debounce\":\"0\",label:\"\",clearable:\"\",\"use-input\":\"\"},on:{filter:e.filterFnAutoselect,\"filter-abort\":e.abortFilterFn},scopedSlots:e._u([{key:\"no-option\",fn:function(){return[a(\"q-item\",[a(\"q-item-section\",{staticClass:\"text-grey\"},[e._v(\"\\n              Não existem administradores cadastrados\\n            \")])],1)]},proxy:!0}]),model:{value:e.selectedAdminEmail,callback:function(t){e.selectedAdminEmail=t},expression:\"selectedAdminEmail\"}})],1),a(\"div\",{staticClass:\"col-1\"},[a(\"div\",{staticClass:\"q-mt-xl\"},[a(\"q-btn\",{staticClass:\"q-pa-sm q-mt-sm q-mb-sm bg-orange-8\",attrs:{\"text-color\":\"white\",label:\"\",title:\"Criar administrador\",icon:\"person_add\"},on:{click:function(t){t.preventDefault(),e.isCreatingAdmin=!1,e.modalCriateAdmin=!0}}})],1)]),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Telefone principal (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.phone,callback:function(t){e.$set(e.companyModel,\"phone\",t)},expression:\"companyModel.phone\"}})],1),a(\"div\",{staticClass:\"col-6 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Telefone secundário\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.companyModel.phone2,callback:function(t){e.$set(e.companyModel,\"phone2\",t)},expression:\"companyModel.phone2\"}})],1),e._m(1),a(\"q-separator\",{staticClass:\"col-12 q-pa-none q-ma-none\"}),a(\"div\",{staticClass:\"col-4 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"CEP (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",\"label-color\":\"orange-8\",color:\"orange-8\",placeholder:\"Digite o CEP\"},scopedSlots:e._u([{key:\"append\",fn:function(){return[e.isValidatingCEP?e._e():a(\"q-icon\",{staticClass:\"pointer-hover\",attrs:{name:\"search\"},on:{click:function(t){return t.preventDefault(),e.getAddressByCEP(t)}}}),e.isValidatingCEP?a(\"q-spinner-pie\",{attrs:{color:\"orange\"}}):e._e()]},proxy:!0}]),model:{value:e.addressModel.cep,callback:function(t){e.$set(e.addressModel,\"cep\",t)},expression:\"addressModel.cep\"}})],1),a(\"div\",{staticClass:\"col-8 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Rua (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.addressModel.street,callback:function(t){e.$set(e.addressModel,\"street\",t)},expression:\"addressModel.street\"}})],1),a(\"div\",{staticClass:\"col-2 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Número (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.addressModel.number,callback:function(t){e.$set(e.addressModel,\"number\",t)},expression:\"addressModel.number\"}})],1),a(\"div\",{staticClass:\"col-2 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Complemento\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.addressModel.complement,callback:function(t){e.$set(e.addressModel,\"complement\",t)},expression:\"addressModel.complement\"}})],1),a(\"div\",{staticClass:\"col-3 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Bairro (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.addressModel.district,callback:function(t){e.$set(e.addressModel,\"district\",t)},expression:\"addressModel.district\"}})],1),a(\"div\",{staticClass:\"col-3 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Cidade (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.addressModel.city,callback:function(t){e.$set(e.addressModel,\"city\",t)},expression:\"addressModel.city\"}})],1),a(\"div\",{staticClass:\"col-2 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Estado (*)\")]),a(\"q-select\",{staticClass:\"col-12 q-mt-sm\",attrs:{options:e.optionsUF,filled:\"\",\"label-color\":\"orange-8\",color:\"orange-8\",\"hide-selected\":\"\",\"fill-input\":\"\",\"input-debounce\":\"0\",label:\"\",clearable:\"\",\"use-input\":\"\"},on:{filter:e.filterFnAutoselectUF,\"filter-abort\":e.abortFilterFnUF},scopedSlots:e._u([{key:\"no-option\",fn:function(){return[a(\"q-item\",[a(\"q-item-section\",{staticClass:\"text-grey\"},[e._v(\"\\n              Não existem administradores cadastrados\\n            \")])],1)]},proxy:!0}]),model:{value:e.addressModel.uf,callback:function(t){e.$set(e.addressModel,\"uf\",t)},expression:\"addressModel.uf\"}})],1),a(\"div\",{staticClass:\"col-12 flex q-my-md justify-between\"},[a(\"span\",{staticClass:\"q-mt-sm\",staticStyle:{\"font-size\":\"1.2rem\"}},[e._v(\"Finalizar \"+e._s(\"insert\"===e.action?\"criação\":\"edição\")+\" da empresa\")])]),a(\"q-separator\",{staticClass:\"col-12 q-pa-none q-ma-none\"}),a(\"div\",{staticClass:\"q-my-md\"},[a(\"q-btn\",{staticClass:\"q-pa-sm q-mb-sm bg-orange-8\",attrs:{\"text-color\":\"white\",loading:e.isCreatingCompany,label:\"Guardar empresa\",title:\"Guardar empresa\",icon:\"save\"},on:{click:function(t){return t.preventDefault(),e.addCompany(t)}},scopedSlots:e._u([{key:\"loading\",fn:function(){return[a(\"q-spinner\")]},proxy:!0}])})],1),a(\"q-dialog\",{attrs:{persistent:\"\",\"transition-show\":\"flip-down\",\"transition-hide\":\"flip-up\"},model:{value:e.modalCriateAdmin,callback:function(t){e.modalCriateAdmin=t},expression:\"modalCriateAdmin\"}},[a(\"q-card\",[a(\"q-card-section\",{staticClass:\"row items-center\"},[a(\"q-icon\",{staticClass:\"text-dark\",staticStyle:{\"font-size\":\"1.9rem\"},attrs:{name:\"person\"}}),e.company?a(\"span\",{staticClass:\"q-ml-sm\"},[e._v(\"Criando administrador da empresa\")]):e._e()],1),a(\"q-card-section\",{staticClass:\"text-left\"},[a(\"div\",{staticClass:\"col-12 q-px-xs\"},[a(\"span\",[e._v(\"Nome completo (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",staticStyle:{\"min-width\":\"400px\",\"max-width\":\"80%\"},attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.userModel.username,callback:function(t){e.$set(e.userModel,\"username\",t)},expression:\"userModel.username\"}})],1),a(\"div\",{staticClass:\"col-12 q-px-xs q-mt-lg\"},[a(\"span\",[e._v(\"Email (*)\")]),a(\"q-input\",{staticClass:\"col-12 q-mt-sm\",staticStyle:{\"min-width\":\"400px\",\"max-width\":\"80%\"},attrs:{filled:\"\",square:\"\",\"label-color\":\"orange-8\",color:\"orange-8\"},model:{value:e.userModel.email,callback:function(t){e.$set(e.userModel,\"email\",t)},expression:\"userModel.email\"}})],1)]),a(\"q-card-actions\",{attrs:{align:\"right\"}},[a(\"q-btn\",{staticStyle:{width:\"120px\"},attrs:{flat:\"\",label:\"Criar\",loading:e.isCreatingAdmin,color:\"orange-8\"},on:{click:function(t){return t.preventDefault(),e.createAdmin(t)}},scopedSlots:e._u([{key:\"loading\",fn:function(){return[a(\"q-spinner\")]},proxy:!0}])}),a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],staticStyle:{width:\"120px\"},attrs:{flat:\"\",label:\"Cancelar\",color:\"gray\"}})],1)],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"col-12 flex q-mt-xs justify-between\"},[a(\"span\",{staticClass:\"q-mt-sm\",staticStyle:{\"font-size\":\"1.2rem\"}},[e._v(\"Dados gerais\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"col-12 flex q-mt-lg justify-between\"},[a(\"span\",{staticClass:\"q-mt-sm\",staticStyle:{\"font-size\":\"1.2rem\"}},[e._v(\"Endereço da empresa\")])])}],i=(a(\"a481\"),a(\"6762\"),a(\"2fdb\"),a(\"551c\"),a(\"06db\"),a(\"097d\"),a(\"2034\")),n=a(\"31f1\"),r={name:\"CrudQuestionary\",props:{action:null,company:null},data:function(){return{companyModel:{id:0,social_reason:\"\",fantasy_name:\"\",decription:\"\",observation:\"\",cnpj:\"\",responsible_id:0,phone:\"\",phone2:\"\",address_id:0},addressModel:{id:0,cep:\"\",street:\"\",number:\"\",complement:\"\",district:\"\",city:\"\",uf:\"\"},userModel:{id:0,company_id:1,cost_center_id:1,address_id:1,role_id:2,status_id:1,username:\"\",email:\"\",password:\"\"},selectedAdminEmail:\"\",selectedAdmin:{},listAdmins:[],modalCriateAdmin:!1,stringOptions:[],options:[],stringOptionsUF:[\"AC\",\"AL\",\"AP\",\"AM\",\"BA\",\"CE\",\"ES\",\"GO\",\"MA\",\"MT\",\"MS\",\"MG\",\"PA\",\"PB\",\"PR\",\"PE\",\"PI\",\"RJ\",\"RN\",\"RS\",\"RO\",\"RR\",\"SC\",\"SP\",\"SE\",\"TO\",\"DF\"],optionsUF:[],isValidatingCEP:!1,isCreatingCompany:!1,isCreatingAdmin:!1}},methods:{addCompany:function(){var e=this;this.validateCompanyModel()&&this.validateAddressModel()&&(this.isCreatingCompany=!0,i[\"a\"].put(\"web/criateFullCompany\",{company:this.companyModel,address:this.addressModel,admin:this.selectedAdmin}).then((function(t){console.log(t.data),e.isCreatingCompany=!1,e.$q.notify({type:\"positive\",color:\"teal-3\",message:\"Empresa cadastrada com sucesso.\",position:\"top-right\"}),e.$emit(\"reloadCompanies\")})).catch((function(t){e.$q.notify({type:\"negative\",message:\"Erro cadastrando empresa.\",position:\"top-right\"}),e.isCreatingCompany=!1,console.log(t)})).finally((function(){e.isCreatingCompany=!1})))},createAdmin:function(){var e=this;this.validateUserModel()&&(this.isCreatingAdmin=!0,this.userModel.password=\"tmp\",i[\"a\"].put(\"web/signInUser\",this.userModel).then((function(t){e.isCreatingCompany=!1,e.userModel=t.data,e.$q.notify({type:\"positive\",color:\"teal-3\",message:\"Administrador criado com sucesso.\",position:\"top-right\"}),e.modalCriateAdmin=!1,e.getAdmins()})).catch((function(t){e.isCreatingCompany=!1,t.message.includes(\"Request failed with status code 500\")&&e.$q.notify({type:\"negative\",message:\"O nome ou o email informado já existe no banco de dados.\",position:\"top-right\"})})).finally((function(){e.isCreatingAdmin=!1})))},prepareToUpdateCompany:function(){},updateCompany:function(){},getAdmins:function(){var e=this;i[\"a\"].get(\"web/users\",{role_id:2}).then((function(t){e.stringOptions=[],t.data.some((function(t,a){e.stringOptions.push(t.email)})),e.listAdmins=t.data})).catch((function(e){})).then((function(){}))},selectUserByEmail:function(e){if(\"\"===e.trim())return null;var t=null;return this.listAdmins.some((function(a,o){a.email===e&&(t=a)})),t},filterFnAutoselect:function(e,t,a){var o=this;setTimeout((function(){t((function(){if(\"\"===e)o.options=o.stringOptions;else{var t=e.toLowerCase();o.options=o.stringOptions.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}}),(function(t){\"\"!==e&&t.options.length>0&&-1===t.optionIndex&&(t.moveOptionSelection(1,!0),t.toggleOption(t.options[t.optionIndex],!0))}))}),300)},abortFilterFn:function(){this.selectedAdminEmail=\"\"},filterFnAutoselectUF:function(e,t,a){var o=this;setTimeout((function(){t((function(){if(\"\"===e)o.optionsUF=o.stringOptionsUF;else{var t=e.toLowerCase();o.optionsUF=o.stringOptionsUF.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}}),(function(t){\"\"!==e&&t.options.length>0&&-1===t.optionIndex&&(t.moveOptionSelection(1,!0),t.toggleOption(t.options[t.optionIndex],!0))}))}),300)},abortFilterFnUF:function(){this.addressModel.uf=\"\"},socialReason:function(){this.$q.dialog({title:\"Razão social\",color:\"orange-8\",message:\"É o nome de registro de uma empresa. Também conhecido como Nome Comercial, Denominação Social ou Firma Empresarial, é o nome dado à pessoa jurídica, que consta em documentos legais, contratos e escrituras.\",transitionShow:\"flip-down\",transitionHide:\"flip-up\",ok:\"Aceitar\"})},fantasyName:function(){this.$q.dialog({title:\"Nome de fantasia\",color:\"orange-8\",message:\"Também conhecido como Nome de Fachada ou Marca Empresarial, é o nome popular de uma empresa, e pode ou não ser igual à sua razão social.\",transitionShow:\"flip-down\",transitionHide:\"flip-up\",ok:\"Aceitar\"})},getAddressByCEP:function(){var e=this;if(\"\"===this.addressModel.cep.trim())return this.$q.notify({type:\"warning\",message:\"O CEP da empresa é obrigatório.\",position:\"top-right\"}),void(this.isValidatingCEP=!1);this.isValidatingCEP=!0,this.addressModel.cep=this.addressModel.cep.trim();var t=this.addressModel.cep.trim().replace(/-/i,\"\");i[\"a\"].get(\"web/getAddressByCEP/\"+t).then((function(t){t.data.erro&&!0===t.data.erro?e.$q.notify({type:\"warning\",message:\"O CEP inserido não existe.\",position:\"top-right\"}):(e.addressModel.cep=t.data.cep.replace(/-/i,\"\"),e.addressModel.street=t.data.logradouro,e.addressModel.district=t.data.bairro,e.addressModel.city=t.data.localidade,e.addressModel.uf=t.data.uf)})).catch((function(t){e.$q.notify({type:\"negative\",message:\"O CEP inserido não existe.\",position:\"top-right\"}),console.log(t)})).finally((function(){e.isValidatingCEP=!1}))},validateCompanyModel:function(){var e;return\"\"===this.companyModel.social_reason.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Razão social é obrigatório.\",position:\"top-right\"}),!1):\"\"===this.companyModel.fantasy_name.trim()||\"\"===this.companyModel.cnpj.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Nome de fantasia é obrigatório.\",position:\"top-right\"}),!1):(e=n[\"a\"].check(\"cnpj\",this.companyModel.cnpj),!1===e.success?(this.$q.notify({type:\"negative\",message:e.error,position:\"top-right\"}),!1):(this.selectedAdmin=this.selectUserByEmail(this.selectedAdminEmail),this.selectedAdmin?(this.companyModel.responsible_id=this.selectedAdmin.id,\"\"===this.companyModel.phone.trim()?(this.$q.notify({type:\"negative\",message:\"Informe pelo menos um número de telefone.\",position:\"top-right\"}),!1):(e=n[\"a\"].check(\"phone\",this.companyModel.phone),!1!==e.success||(this.$q.notify({type:\"negative\",message:e.error,position:\"top-right\"}),!1))):(this.$q.notify({type:\"negative\",message:\"Selecione um administrado válido ou crie um e selecione-o.\",position:\"top-right\"}),!1)))},validateUserModel:function(){var e;return\"\"===this.userModel.username.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Nome completo é obrigatório.\",position:\"top-right\"}),!1):\"\"===this.userModel.email.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Email é obrigatório.\",position:\"top-right\"}),!1):(e=n[\"a\"].check(\"email\",this.userModel.email),!1!==e.success||(this.$q.notify({type:\"negative\",message:\"O email informado é inválido.\",position:\"top-right\"}),!1))},validateAddressModel:function(){var e;return\"\"===this.addressModel.cep.trim()?(this.$q.notify({type:\"negative\",message:\"O campo CEP é obrigatório.\",position:\"top-right\"}),!1):(e=n[\"a\"].check(\"cep\",this.addressModel.cep),!1===e.success?(this.$q.notify({type:\"negative\",message:\"O CEP informado é inválido.\",position:\"top-right\"}),!1):\"\"===this.addressModel.street.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Rúa é obrigatório.\",position:\"top-right\"}),!1):\"\"===this.addressModel.number.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Número é obrigatório.\",position:\"top-right\"}),!1):\"\"===this.addressModel.district.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Bairro é obrigatório.\",position:\"top-right\"}),!1):\"\"===this.addressModel.city.trim()?(this.$q.notify({type:\"negative\",message:\"O campo Cidade é obrigatório.\",position:\"top-right\"}),!1):\"\"!==this.addressModel.uf.trim()||(this.$q.notify({type:\"negative\",message:\"O campo Estado é obrigatório.\",position:\"top-right\"}),!1))}},watch:{},beforeMount:function(){this.getAdmins()},mounted:function(){}},l=r,c=(a(\"94d2\"),a(\"2877\")),d=Object(c[\"a\"])(l,o,s,!1,null,\"04fce00e\",null);t[\"default\"]=d.exports},\"6cc4\":function(e,t,a){},\"8de9\":function(e,t,a){},\"94d2\":function(e,t,a){\"use strict\";var o=a(\"d9d1\"),s=a.n(o);s.a},a22f:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"row justify-left\"},[a(\"div\",{staticStyle:{width:\"100%\"}},[a(\"q-table\",{attrs:{title:\" \",data:e.data,columns:e.columns,\"row-key\":\"id\",\"binary-state-sort\":\"\",\"card-container-style\":{backgroundColor:\"#ff0000\"},dense:e.$q.screen.lt.md,loading:e.isLoading,pagination:e.pagination,\"rows-per-page-options\":[0]},scopedSlots:e._u([{key:\"top\",fn:function(){return[a(\"div\",{staticClass:\"col-4\"},[a(\"q-input\",{attrs:{\"label-color\":\"orange-8\",color:\"orange-8\",placeholder:\"Buscar ...\"},model:{value:e.filter,callback:function(t){e.filter=t},expression:\"filter\"}})],1),a(\"div\",{staticClass:\"col-4 text-center\"},[a(\"q-btn\",{staticClass:\"q-ml-lg\",attrs:{flat:\"\",dense:\"\",\"icon-right\":\"navigate_before\",title:\"Página anterior\",\"no-caps\":\"\",disable:0==e.page},on:{click:function(t){return e.getCompanies(e.page-1)}}}),a(\"q-btn\",{staticClass:\"q-px-sm \",attrs:{flat:\"\",dense:\"\",title:\"Página atual\",\"no-caps\":\"\"}},[e.isLoading?e._e():a(\"span\",{attrs:{color:\"orange\"}},[e._v(e._s(e.page+1))]),e.isLoading?a(\"q-spinner-pie\",{attrs:{color:\"orange\"}}):e._e()],1),a(\"q-btn\",{attrs:{flat:\"\",dense:\"\",\"icon-right\":\"navigate_next\",title:\"Página seguinte\",\"no-caps\":\"\",disable:!e.hasMorePage},on:{click:function(t){return e.getCompanies(e.page+1)}}})],1),a(\"div\",{staticClass:\"col-4 text-right\"},[a(\"q-btn\",{attrs:{color:\"orange-8\",\"icon-right\":\"archive\",label:\"Exportar\",title:\"Exportar para CSV\",\"no-caps\":\"\"},on:{click:e.exportTable}})],1)]},proxy:!0},{key:\"body\",fn:function(t){return[a(\"q-tr\",{attrs:{props:t}},[a(\"q-td\",{key:\"fantasy_name\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n                \"+e._s(t.row.fantasy_name)+\"\\n            \")]),a(\"q-td\",{key:\"social_reason\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n                \"+e._s(t.row.social_reason)+\"\\n            \")]),a(\"q-td\",{key:\"cnpj\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n                \"+e._s(t.row.cnpj)+\"\\n            \")]),a(\"q-td\",{key:\"phone\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n              \"+e._s(t.row.phone)+\"\\n            \")]),a(\"q-td\",{key:\"decription\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n              \"+e._s(t.row.decription)+\"\\n            \")]),a(\"q-td\",{key:\"created_at\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[e._v(\"\\n              \"+e._s(t.row.created_at.substr(0,10))+\"\\n            \")]),a(\"q-td\",{key:\"actions\",staticClass:\"q-pa-none q-ma-none\",attrs:{props:t}},[a(\"div\",{staticStyle:{\"margin-left\":\"-3px\"}},[a(\"q-icon\",{staticClass:\"pointer-hover q-mr-sm\",attrs:{color:\"primary\",size:\"sm\",title:\"Ver/Editar empresa\",name:\"account_balance_wallet\"},on:{click:function(a){return e.editCompany(t.row)}}}),a(\"q-icon\",{staticClass:\"pointer-hover\",attrs:{color:\"red\",size:\"sm\",name:\"delete\",title:\"Eliminar empresa\"},on:{click:function(a){return a.preventDefault(),e.confirmDeleteCompany(t.row)}}})],1)])],1)]}},{key:\"bottom\",fn:function(){return[a(\"div\",{staticClass:\"col-12 text-center q-mt-md\"},[a(\"q-btn\",{staticClass:\"q-ml-lg\",attrs:{flat:\"\",dense:\"\",\"icon-right\":\"navigate_before\",title:\"Página anterior\",\"no-caps\":\"\",disable:0==e.page},on:{click:function(t){return e.getCompanies(e.page-1)}}}),a(\"q-btn\",{staticClass:\"q-px-sm \",attrs:{flat:\"\",dense:\"\",title:\"Página atual\",\"no-caps\":\"\"}},[e._v(\"\\n            \"+e._s(e.page+1)+\"\\n          \")]),a(\"q-btn\",{attrs:{flat:\"\",dense:\"\",\"icon-right\":\"navigate_next\",title:\"Página seguinte\",\"no-caps\":\"\",disable:!e.hasMorePage},on:{click:function(t){return e.getCompanies(e.page+1)}}})],1)]},proxy:!0},{key:\"pagination\",fn:function(){},proxy:!0},{key:\"no-data\",fn:function(t){var o=t.icon,s=(t.message,t.filter);return[a(\"div\",{staticClass:\"full-width row flex-center text-accent q-gutter-sm\"},[a(\"q-icon\",{attrs:{size:\"2em\",name:\"sentiment_dissatisfied\"}}),a(\"span\",[e._v(\"\\n            Não existem dados para mostrar...\\n          \")]),a(\"q-icon\",{attrs:{size:\"2em\",name:s?\"filter_b_and_w\":o}})],1)]}}])}),a(\"q-dialog\",{attrs:{persistent:\"\",\"transition-show\":\"flip-down\",\"transition-hide\":\"flip-up\"},model:{value:e.modalConfirmDelete,callback:function(t){e.modalConfirmDelete=t},expression:\"modalConfirmDelete\"}},[a(\"q-card\",[a(\"q-card-section\",{staticClass:\"row items-center\"},[a(\"q-icon\",{staticClass:\"text-red\",staticStyle:{\"font-size\":\"1.9rem\"},attrs:{name:\"warning\"}}),e.company?a(\"span\",{staticClass:\"q-ml-sm\"},[e._v('Confirma que deseja eliminar a empresa \"'+e._s(e.company.fantasy_name)+'\"?')]):e._e()],1),a(\"q-card-section\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isDeleting,expression:\"isDeleting\"}],staticClass:\"text-center\"},[a(\"q-spinner-ios\",{attrs:{color:\"orange-8\",size:\"1.9rem\"}})],1),a(\"q-card-actions\",{attrs:{align:\"right\"}},[a(\"q-btn\",{attrs:{flat:\"\",label:\"Eliminar\",color:\"orange-8\"},on:{click:function(t){return t.preventDefault(),e.deleteCompany(t)}}}),a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Cancelar\",color:\"gray\"}})],1)],1)],1)],1)])},s=[],i=(a(\"7f7f\"),a(\"ac6a\"),a(\"cadf\"),a(\"06db\"),a(\"8615\"),a(\"28a5\"),a(\"2034\")),n=a(\"b178\");function r(e,t){var a=void 0!==t?t(e):e;return a=void 0===a||null===a?\"\":String(a),a=a.split('\"').join('\"\"'),'\"'.concat(a,'\"')}var l={name:\"TableCompanies\",props:{},components:{},data:function(){return{action:\"\",company:null,data:[],columns:[{label:\"Nome fantasia\",field:\"fantasy_name\",name:\"fantasy_name\",required:!0,align:\"left\",format:function(e){return\"\".concat(e)},sortable:!0},{label:\"Razão social\",field:\"social_reason\",name:\"social_reason\",align:\"center\"},{label:\"CNPJ\",field:\"cnpj\",name:\"cnpj\",align:\"center\"},{label:\"Telefone\",field:\"phone\",name:\"phone\",align:\"center\"},{label:\"Descrição\",field:\"decription\",name:\"decription\",align:\"center\"},{label:\"Criação\",field:\"created_at\",name:\"created_at\",align:\"center\",sortable:!0},{label:\"Ações\",field:\"actions\",name:\"actions\",align:\"center\"}],filter:\"\",isLoading:!1,page:0,hasMorePage:!1,strFilter:0,pagination:{rowsPerPage:0},modalConfirmDelete:!1,isDeleting:!1}},methods:{getCompanies:function(e){var t=this;this.isLoading=!0,i[\"a\"].get(\"web/companies\",{filter:this.filter,page:e}).then((function(a){var o=Object.values(a.data);t.data=o,t.page=e,t.hasMorePage=o.length})).catch((function(e){})).then((function(){t.isLoading=!1}))},filterCompanies:function(){this.filter.trim().length&&this.getCompanies(0)},editCompany:function(e){this.$emit(\"editCompany\",e)},deleteCompany:function(){var e=this;this.company&&(this.isDeleting=!0,i[\"a\"].delete(\"web/companies/\"+this.company.id).then((function(t){e.modalConfirmDelete=!1,e.$q.notify({type:\"positive\",message:\"Empresa eliminada com sucesso.\",position:\"top-right\"}),e.getCompanies(e.page)})).catch((function(e){})).then((function(){e.isDeleting=!1})))},confirmDeleteCompany:function(e){this.company=e,this.modalConfirmDelete=!0},exportTable:function(){var e=this,t=[this.columns.map((function(e){return r(e.label)}))].concat(this.data.map((function(t){return e.columns.map((function(e){return r(\"function\"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format)})).join(\",\")}))).join(\"\\r\\n\"),a=Object(n[\"h\"])(\"table-export.csv\",t,\"text/csv\");!0!==a&&this.$q.notify({message:\"Browser denied file download...\",color:\"negative\",icon:\"warning\"})}},watch:{filter:function(e){this.getCompanies(0)}},beforeMount:function(){this.getCompanies(0)}},c=l,d=(a(\"19b6\"),a(\"2877\")),p=Object(d[\"a\"])(c,o,s,!1,null,\"0b41813c\",null);t[\"default\"]=p.exports},a593:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-page\",{staticClass:\"bg-gray q-pa-md\"},[a(\"div\",{staticClass:\"flex justify-between\"},[a(\"h6\",[e._v(\"Empresas\")])]),a(\"q-card\",{attrs:{\"no-bordered\":\"\",flat:\"\"}},[a(\"q-tabs\",{staticClass:\"text-grey\",attrs:{dense:\"\",\"active-color\":\"orange-10\",\"indicator-color\":\"orange-10\",align:\"left\",caps:\"\",\"inline-label\":\"\"},model:{value:e.tab,callback:function(t){e.tab=t},expression:\"tab\"}},[a(\"q-tab\",{staticClass:\"text-dark\",attrs:{name:\"showCompanies\",icon:\"horizontal_split\",label:\"Empresas\"},on:{click:e.showTabCompanies}}),a(\"q-tab\",{staticClass:\"text-dark\",attrs:{name:\"crudCompanies\",icon:e.iconActionCompany,label:e.crudTabTitle}})],1),a(\"q-separator\"),a(\"q-tab-panels\",{attrs:{animated:\"\"},model:{value:e.tab,callback:function(t){e.tab=t},expression:\"tab\"}},[a(\"q-tab-panel\",{staticClass:\"q-pa-none\",attrs:{name:\"showCompanies\"}},[a(\"TableCompanies\",{on:{editCompany:e.editCompany}})],1),a(\"q-tab-panel\",{attrs:{name:\"crudCompanies\"}},[a(\"CrudCompanies\",{attrs:{action:e.action,company:e.company},on:{reloadCompanies:e.reloadCompanies}})],1)],1)],1)],1)},s=[],i=(a(\"a481\"),a(\"f751\"),{name:\"Companies\",components:{CrudCompanies:a(\"26a5\").default,TableCompanies:a(\"a22f\").default},data:function(){return{tab:\"\",companies:[],crudTabTitle:\"\",action:\"\",iconActionCompany:\"\"}},methods:{showTabCompanies:function(){this.company={},this.crudTabTitle=\"Nova empresa\",this.action=\"insert\",this.iconActionCompany=\"add\",this.tab=\"showCompanies\"},editCompany:function(e){this.company=Object.assign({},e),this.crudTabTitle=\"Editar empresa\",this.action=\"edit\",this.iconActionCompany=\"edit\",this.tab=\"crudCompanies\"},reloadCompanies:function(){this.showTabCompanies()}},watch:{},computed:{},beforeMount:function(){this.showTabCompanies()},created:function(){},destroyed:function(){},beforeRouteEnter:function(e,t,a){a((function(e){e.isAuth&&e.$router.replace({name:\"public.index\"})}))},meta:function(){return{title:\"Empresas\"}}}),n=i,r=(a(\"aa89\"),a(\"2877\")),l=Object(r[\"a\"])(n,o,s,!1,null,\"557f7d0c\",null);t[\"default\"]=l.exports},aa89:function(e,t,a){\"use strict\";var o=a(\"8de9\"),s=a.n(o);s.a},d9d1:function(e,t,a){}}]);","extractedComments":[]}